<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Fast Math Game - Videojuego educativo para aprender y practicar las tablas de multiplicar hasta 15x15">
    <title>Fast Math Game - Entrena tu Mente</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;600&display=swap"
        rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <!-- PapaParse -->
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

    <!-- FileSaver.js -->
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <!-- ===== VISTA DE CONFIGURACI√ìN (INICIO) ===== -->
    <section id="config-view" class="view active">
        <div class="config-container">
            <div class="logo-section">
                <div class="logo-icon">
                    <span class="logo-symbol">√ó</span>
                </div>
                <h1 class="logo-title">Fast Math Game</h1>
                <p class="logo-subtitle">Domina las tablas de multiplicar</p>
            </div>

            <form id="config-form" class="config-form">
                <div class="form-group">
                    <label for="nickname">Tu Nickname</label>
                    <input type="text" id="nickname" name="nickname" placeholder="Ingresa tu nombre" required
                        maxlength="20">
                </div>

                <div class="form-group">
                    <label>Modo de Juego</label>
                    <div class="mode-selector">
                        <input type="radio" id="mode-timer" name="game-mode" value="TIMER" checked>
                        <label for="mode-timer" class="mode-option">
                            <span class="mode-icon">‚è±Ô∏è</span>
                            <span class="mode-name">Contrarreloj</span>
                            <span class="mode-desc">Tiempo l√≠mite</span>
                        </label>

                        <input type="radio" id="mode-free" name="game-mode" value="FREE">
                        <label for="mode-free" class="mode-option">
                            <span class="mode-icon">üéØ</span>
                            <span class="mode-name">Pr√°ctica Libre</span>
                            <span class="mode-desc">Sin l√≠mite</span>
                        </label>
                    </div>
                </div>

                <div class="form-group timer-config" id="timer-config">
                    <label for="time-limit">Tiempo L√≠mite (minutos)</label>
                    <div class="time-slider-container">
                        <input type="range" id="time-limit" name="time-limit" min="1" max="15" value="1">
                        <span class="time-display" id="time-display">1 min</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Tablas a Practicar</label>
                    <div class="tables-selector" id="tables-selector">
                        <div class="tables-grid" id="tables-grid">
                            <button type="button" class="table-btn active" data-table="1">1</button>
                            <button type="button" class="table-btn active" data-table="2">2</button>
                            <button type="button" class="table-btn active" data-table="3">3</button>
                            <button type="button" class="table-btn active" data-table="4">4</button>
                            <button type="button" class="table-btn active" data-table="5">5</button>
                            <button type="button" class="table-btn active" data-table="6">6</button>
                            <button type="button" class="table-btn active" data-table="7">7</button>
                            <button type="button" class="table-btn active" data-table="8">8</button>
                            <button type="button" class="table-btn active" data-table="9">9</button>
                            <button type="button" class="table-btn active" data-table="10">10</button>
                            <button type="button" class="table-btn active" data-table="11">11</button>
                            <button type="button" class="table-btn active" data-table="12">12</button>
                            <button type="button" class="table-btn active" data-table="13">13</button>
                            <button type="button" class="table-btn active" data-table="14">14</button>
                            <button type="button" class="table-btn active" data-table="15">15</button>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn-start">
                    <span>COMENZAR</span>
                    <span class="btn-arrow">‚Üí</span>
                </button>
            </form>
        </div>
        <div class="config-decoration"></div>
    </section>

    <!-- ===== VISTA DE JUEGO (GAMEPLAY) ===== -->
    <section id="game-view" class="view">
        <div class="game-container">
            <!-- Panel Izquierdo: Matriz -->
            <div class="matrix-panel">
                <div class="matrix-header">
                    <span class="matrix-title">Tabla de Multiplicar</span>
                    <span class="matrix-progress" id="matrix-progress">0 / 225</span>
                </div>
                <div class="matrix-grid" id="matrix-grid">
                    <!-- Grid generado por JS -->
                </div>
            </div>

            <!-- Panel Derecho: Controles -->
            <div class="controls-panel">
                <div class="timer-display" id="timer-display">
                    <span class="timer-label" id="timer-label">Tiempo</span>
                    <span class="timer-value" id="timer-value">05:00</span>
                </div>

                <div class="operation-display">
                    <div class="operation-card" id="operation-card">
                        <span class="factor" id="factor-a">?</span>
                        <span class="operator">√ó</span>
                        <span class="factor" id="factor-b">?</span>
                        <span class="equals">=</span>
                    </div>
                    <input type="number" id="answer-input" class="answer-input" placeholder="?" min="1" max="225"
                        autofocus>
                </div>

                <div class="stats-row">
                    <div class="stat-card stat-correct">
                        <span class="stat-icon">‚úì</span>
                        <span class="stat-value" id="stat-correct">0</span>
                        <span class="stat-label">Aciertos</span>
                    </div>
                    <div class="stat-card stat-wrong">
                        <span class="stat-icon">‚úó</span>
                        <span class="stat-value" id="stat-wrong">0</span>
                        <span class="stat-label">Errores</span>
                    </div>
                </div>

                <button type="button" class="btn-end" id="btn-end-session">
                    Terminar Sesi√≥n
                </button>
            </div>
        </div>
    </section>

    <!-- ===== VISTA DE ANAL√çTICAS (DASHBOARD) ===== -->
    <section id="dashboard-view" class="view">
        <div class="dashboard-container">
            <div class="dashboard-header">
                <h2 class="dashboard-title">üìä Anal√≠ticas de Sesi√≥n</h2>
                <div class="dashboard-actions">
                    <button type="button" class="btn-download" id="btn-download-csv">
                        üì• Descargar CSV
                    </button>
                    <button type="button" class="btn-secondary" id="btn-new-game">
                        Nueva Partida
                    </button>
                </div>
            </div>

            <div class="summary-cards">
                <div class="summary-card">
                    <span class="summary-icon">üéØ</span>
                    <span class="summary-value" id="summary-total">0</span>
                    <span class="summary-label">Operaciones</span>
                </div>
                <div class="summary-card">
                    <span class="summary-icon">‚úÖ</span>
                    <span class="summary-value" id="summary-correct">0</span>
                    <span class="summary-label">Correctas</span>
                </div>
                <div class="summary-card">
                    <span class="summary-icon">‚ö°</span>
                    <span class="summary-value" id="summary-avg-time">0ms</span>
                    <span class="summary-label">Tiempo Promedio</span>
                </div>
                <div class="summary-card">
                    <span class="summary-icon">üìà</span>
                    <span class="summary-value" id="summary-accuracy">0%</span>
                    <span class="summary-label">Precisi√≥n</span>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-card">
                    <h3 class="chart-title">Distribuci√≥n de Rendimiento</h3>
                    <div class="chart-container">
                        <canvas id="chart-pie"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">Errores por Tabla</h3>
                    <div class="chart-container">
                        <canvas id="chart-bar-tables"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">Top 5 Operaciones Dif√≠ciles</h3>
                    <div class="chart-container">
                        <canvas id="chart-bar-top"></canvas>
                    </div>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">Velocidad de Respuesta</h3>
                    <div class="chart-container">
                        <canvas id="chart-histogram"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="js/data.js"></script>
    <script src="js/grid.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/app.js"></script>
</body>

</html>